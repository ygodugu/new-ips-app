"use strict";(self.webpackChunkips_app=self.webpackChunkips_app||[]).push([[79],{2806:function(e,n,t){t.d(n,{b:function(){return s}});var s=t(1243).Z.create({baseURL:"http://13.59.240.218"});s.interceptors.request.use((function(e){e.headers["Content-Type"]="application/json",e.headers.Accept="*/*",e.headers["Access-Control-Allow-Origin"]="*",e.headers["Access-Control-Allow-Headers"]="Origin, X-Requested-With, Content-Type, Accept";var n=localStorage.getItem("token");return n&&(e.headers.Authorization="Bearer "+n),e}),(function(e){return Promise.reject(e)})),s.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}))},7883:function(e,n,t){t.d(n,{$:function(){return i}});var s=t(3637),a=t(184),i=function(e){var n=e.page,t=e.pageSize,i=e.data,r=e.setPage;return(0,a.jsxs)("div",{className:"row pagin-sec",children:[(0,a.jsx)("div",{className:"col-sm-12 col-md-5",children:(0,a.jsx)("div",{className:"dataTables_info",role:"status","aria-live":"polite",children:"Showing ".concat(n*t+1," to  ").concat(n*t+i.data.length," of ").concat(i.count," entries")})}),(0,a.jsx)("div",{className:"col-sm-12 col-md-7",style:{display:"flex",justifyContent:"flex-end"},children:(0,a.jsx)(s.Z,{itemClass:"page-item",prevPageText:"Previous",nextPageText:"Next",linkClass:"page-link",activePage:n+1,itemsCountPerPage:t,totalItemsCount:i.count,pageRangeDisplayed:5,hideFirstLastPages:!0,onChange:function(e){return r(e-1)}})})]})}},7282:function(e,n,t){t.d(n,{p:function(){return o}});var s=t(9439),a=t(2791),i=t(9603),r=t(3360);var c=t.p+"static/media/trash-icon.ee0252a5a11b0d7959d2605f91ec705d.svg",l=t(184),o=function(e){var n=e.onClick,t=(0,a.useState)(!1),o=(0,s.Z)(t,2),d=o[0],u=o[1],m=function(){u(!1)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("img",{className:"action-item",style:{cursor:"pointer"},src:c,onClick:function(){return u(!0)}}),d?(0,l.jsxs)(i.Z,{show:!0,onHide:m,size:"lg",children:[(0,l.jsxs)(i.Z.Header,{closeButton:!1,children:[(0,l.jsx)(i.Z.Title,{children:"Delete"}),(0,l.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:m,children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,l.jsxs)(i.Z.Body,{children:["Are you sure you want to delete?",(0,l.jsxs)("div",{className:"modal-footer d-flex justify-content-end",children:[(0,l.jsx)(r.Z,{variant:"primary",onClick:function(){u(!1),n()},children:" Yes"}),(0,l.jsx)(r.Z,{variant:"danger",onClick:m,children:"No"})]})]})]}):null]})}},2805:function(e,n,t){t.d(n,{d:function(){return i}});t(2791);var s=t.p+"static/media/edit-icon.99f293607452e6df8a5fe12a6b47b2b0.svg",a=t(184),i=function(e){var n=e.onClick;return(0,a.jsx)("img",{style:{cursor:"pointer"},src:s,onClick:n})}},9324:function(e,n,t){t.d(n,{q:function(){return a}});var s=t(184),a=function(e){return 0===e.code?(0,s.jsx)("span",{className:"badge badge-pill badge-danger",children:"InActive"}):1===e.code?(0,s.jsx)("span",{className:"badge badge-pill badge-success",children:"Active"}):2===e.code?(0,s.jsx)("span",{className:"badge badge-pill badge-warning",children:"Hold"}):void 0}},79:function(e,n,t){t.r(n),t.d(n,{Comments:function(){return T}});var s=t(9439),a=t(6403),i=t(2917),r=t(3418),c=t(2791),l=t(2469),o=t(4849),d=t(2806),u=t(7282),m=t(2805),h=t(9324),x=t(1413),j=t(5987),f=t(9603),p=t(5705),v=t(8007),g=t(7734),b=t(184),C=(0,v.Ry)({name:(0,v.Z_)().required("Comment Text is required"),priest:(0,v.IX)().min(1,"Select Priest").required("Select Priest")}),Z=function(e){var n=e.onSubmit,t=e.initialValues,a=(0,c.useState)([]),i=(0,s.Z)(a,2),r=i[0],l=i[1];(0,c.useEffect)((function(){d.b.get("/priests/designation").then((function(e){return e.data.map((function(e){return{id:e.id,label:"".concat(e.user.firstName," ").concat(e.user.middleName," ").concat(e.user.lastName)}}))})).then((function(e){l(e),t.priestId&&o.setFieldValue("priest",e.filter((function(e){return e.id===t.priestId})))}))}),[]);var o=(0,p.TA)({initialValues:t,onSubmit:function(e,t){(0,t.validateForm)(e).then((function(t){e.status?n((0,x.Z)((0,x.Z)({},e),{},{status:parseInt(e.status)})):n(e)}))},validationSchema:C,validateOnBlur:!0,validateOnChange:!1});return console.log(o.values),(0,b.jsxs)("form",{onSubmit:o.handleSubmit,children:[(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("aside",{className:"col-md-6",children:(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"name",children:"Comment Text *"}),(0,b.jsx)("input",{type:"text",id:"name",value:o.values.name,onChange:o.handleChange,onBlur:o.handleBlur,className:"form-control form-control-lg",placeholder:"Enter Comment Text"}),(0,b.jsx)("div",{className:"invalid-feedback",children:o.errors.name})]})}),(0,b.jsx)("aside",{className:"col-md-6",children:(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"priestId",children:"Comment On *"}),(0,b.jsx)(g.pY,{selected:o.values.priest,id:"priest",options:r,onChange:function(e){o.setFieldValue("priest",e)},placeholder:"Choose a priest..."}),(0,b.jsx)("div",{className:"invalid-feedback",children:o.errors.priest})]})})]}),(0,b.jsx)("div",{className:"modal-footer d-flex justify-content-end",children:(0,b.jsx)("button",{type:"submit",className:"btn mb-2 btn-primary",children:"Save"})})]})},N=["priest"],y=function(e){return d.b.post("/comments",e)},S=function(e){var n=e.handleSuccess,t=e.handleClose,s=(0,r.D)({mutationFn:y});return(0,b.jsxs)(f.Z,{show:!0,onHide:t,size:"lg",children:[(0,b.jsxs)(f.Z.Header,{closeButton:!1,children:[(0,b.jsx)(f.Z.Title,{children:"New Comment"}),(0,b.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:t,children:(0,b.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,b.jsx)(f.Z.Body,{children:(0,b.jsx)(Z,{initialValues:{name:"",description:"",status:""},onSubmit:function(e){var t=e.priest,a=(0,j.Z)(e,N),i=t[0].id;s.mutate((0,x.Z)((0,x.Z)({},a),{},{priestId:i}),{onSuccess:n})}})})]})},k=["priest"],w=function(e){return d.b.put("/comments/".concat(e.id),e)},P=function(e){var n=e.handleSuccess,t=e.handleClose,s=e.id,a=(0,i.a)({queryKey:["comment-details",s],queryFn:function(){return function(e){return d.b.get("/comments/".concat(e)).then((function(e){return e.data}))}(s)}}),c=a.data,l=(0,r.D)({mutationFn:w});return(0,b.jsx)(b.Fragment,{children:c&&(0,b.jsxs)(f.Z,{show:!0,onHide:t,size:"lg",children:[(0,b.jsxs)(f.Z.Header,{closeButton:!1,children:[(0,b.jsx)(f.Z.Title,{children:"Edit Comment"}),(0,b.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:t,children:(0,b.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,b.jsx)(f.Z.Body,{children:(0,b.jsx)(Z,{initialValues:c,onSubmit:function(e){var t=e.priest,a=(0,j.Z)(e,k),i=t[0].id;l.mutate((0,x.Z)((0,x.Z)({},a),{},{id:s,priestId:i}),{onSuccess:n})}})})]})})},A=t(7883),F=function(e){return d.b.delete("/comments/".concat(e))},T=function(){var e=(0,a.NL)(),n=(0,c.useState)(0),t=(0,s.Z)(n,2),x=t[0],j=t[1],f=(0,c.useState)(!1),p=(0,s.Z)(f,2),v=p[0],g=p[1],C=(0,c.useState)(!1),Z=(0,s.Z)(C,2),N=Z[0],y=Z[1],k=(0,c.useState)(!1),w=(0,s.Z)(k,2),T=w[0],q=w[1],B=(0,c.useState)(""),H=(0,s.Z)(B,2),I=H[0],O=(H[1],(0,c.useState)()),L=(0,s.Z)(O,2),V=L[0],z=L[1],D=(0,i.a)({queryKey:["comments",x,I],queryFn:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,t=arguments.length>2?arguments[2]:void 0;return d.b.get("/comments?pageIndex=".concat(e,"&pageSize=").concat(n,"&search=").concat(t)).then((function(e){return e.data}))}(x,20,I)},keepPreviousData:!0}),E=D.data,R=D.refetch,_=D.isLoading,K=(0,r.D)({mutationFn:F}),X=function(e){return function(){K.mutate(e,{onSuccess:R,onError:function(e){q(!0),setTimeout((function(){q(!1)}),3e3)}})}};return(0,b.jsxs)(b.Fragment,{children:[T?(0,b.jsxs)(l.Z,{variant:"danger",onClose:function(){return T(!1)},children:[(0,b.jsx)(l.Z.Heading,{children:"Server Error!"}),(0,b.jsx)("p",{children:"Can not delete comment"})]}):null,(0,b.jsx)("div",{className:"row justify-content-center",children:(0,b.jsxs)("div",{className:"col-12",children:[(0,b.jsxs)("div",{className:"row heading-add",children:[(0,b.jsx)("aside",{className:"col-sm-10",children:(0,b.jsx)("h2",{className:"mb-0 page-title",children:"Comments"})}),(0,b.jsx)("aside",{className:"col-sm-2 add-sec",children:(0,b.jsx)("button",{className:"bttn",onClick:function(){g(!0)},children:"Add"})})]}),(0,b.jsx)("div",{className:"row my-2",children:(0,b.jsx)("div",{className:"col-md-12",children:(0,b.jsx)("div",{className:"card shadow",children:(0,b.jsxs)("div",{className:"card-body",children:[(0,b.jsxs)("table",{className:"table",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Comment Text"}),(0,b.jsx)("th",{children:"Comment On"}),(0,b.jsx)("th",{children:"Comment By"}),(0,b.jsx)("th",{children:"Status"}),(0,b.jsx)("th",{children:"Actions"})]})}),(0,b.jsx)("tbody",{children:_?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{rowSpan:"10",colSpan:"5",children:(0,b.jsx)("div",{className:"text-center py-5",children:(0,b.jsx)(o.Z,{animation:"border"})})})}):E.data.map((function(e){return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:e.name}),(0,b.jsxs)("td",{children:[" ",e.priestCreatedOn]}),(0,b.jsxs)("td",{children:[" ",e.commentedByName]}),(0,b.jsx)("td",{children:(0,b.jsx)(h.q,{code:e.status})}),(0,b.jsxs)("td",{className:"actions",children:[(0,b.jsx)(m.d,{onClick:(n=e.id,function(){z(n),y(!0)})}),(0,b.jsx)(u.p,{onClick:X(e.id)})]})]},e.id);var n}))})]}),_?null:(0,b.jsx)(A.$,{page:x,pageSize:20,data:E,setPage:j})]})})})})]})}),v?(0,b.jsx)(S,{handleSuccess:function(){g(!1),R()},handleClose:function(){return g(!1)}}):null,N?(0,b.jsx)(P,{handleSuccess:function(){e.invalidateQueries({queryKey:["comment-details",V]}),y(!1),R()},handleClose:function(){return y(!1)},id:V}):null]})}},2469:function(e,n,t){var s=t(1413),a=t(5987),i=t(1694),r=t.n(i),c=t(2791),l=t(239),o=t(9007),d=t(6445),u=t(162),m=t(4418),h=t(473),x=t(7472),j=t(6543),f=t(184),p=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],v=(0,x.Z)("h4");v.displayName="DivStyledAsH4";var g=(0,j.Z)("alert-heading",{Component:v}),b=(0,j.Z)("alert-link",{Component:d.Z}),C={variant:"primary",show:!0,transition:m.Z,closeLabel:"Close alert"},Z=c.forwardRef((function(e,n){var t=(0,l.Ch)(e,{show:"onClose"}),i=t.bsPrefix,c=t.show,d=t.closeLabel,x=t.closeVariant,j=t.className,v=t.children,g=t.variant,b=t.onClose,C=t.dismissible,Z=t.transition,N=(0,a.Z)(t,p),y=(0,u.vE)(i,"alert"),S=(0,o.Z)((function(e){b&&b(!1,e)})),k=!0===Z?m.Z:Z,w=(0,f.jsxs)("div",(0,s.Z)((0,s.Z)({role:"alert"},k?void 0:N),{},{ref:n,className:r()(j,y,g&&"".concat(y,"-").concat(g),C&&"".concat(y,"-dismissible")),children:[C&&(0,f.jsx)(h.Z,{onClick:S,"aria-label":d,variant:x}),v]}));return k?(0,f.jsx)(k,(0,s.Z)((0,s.Z)({unmountOnExit:!0},N),{},{ref:void 0,in:c,children:w})):c?w:null}));Z.displayName="Alert",Z.defaultProps=C,n.Z=Object.assign(Z,{Link:b,Heading:g})}}]);
//# sourceMappingURL=79.45c6c8bf.chunk.js.map