"use strict";(self.webpackChunkips_app=self.webpackChunkips_app||[]).push([[97],{2806:function(e,s,l){l.d(s,{b:function(){return i}});var i=l(1243).Z.create({baseURL:"http://13.59.240.218"});i.interceptors.request.use((function(e){e.headers["Content-Type"]="application/json",e.headers.Accept="*/*",e.headers["Access-Control-Allow-Origin"]="*",e.headers["Access-Control-Allow-Headers"]="Origin, X-Requested-With, Content-Type, Accept";var s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer "+s),e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}))},2097:function(e,s,l){l.r(s),l.d(s,{ViewTemple:function(){return g}});var i=l(9439),c=l(2917),n=l(2791),a=l(4849),t=l(7689),d=l(2806),r=l(1413),o=l(5987),m=l(3418),h=l(9603),u=l(5705),j=l(7734),x=l(8007),v=(l(8639),l(184)),p=(0,x.Ry)({servicesId:(0,x.Z_)().required("Select Service")}),N=function(e){var s=e.onSubmit,l=e.initialValues,c=(0,n.useState)([]),a=(0,i.Z)(c,2),t=a[0],r=a[1],o=(0,n.useState)([]),m=(0,i.Z)(o,2),h=(m[0],m[1]),x=(0,n.useState)([]),N=(0,i.Z)(x,2),b=(N[0],N[1]);(0,n.useEffect)((function(){d.b.get("/services/name").then((function(e){return e.data.map((function(e){return{id:e.id,label:"".concat(e.name," ($").concat(e.defaultPrice,")")}}))})).then((function(e){r(e),l.servicesId&&f.setFieldValue("services",e.filter((function(e){return e.id===l.servicesId})))}))}),[]),(0,n.useEffect)((function(){d.b.get("/priests/designation").then((function(e){return e.data.map((function(e){var s;return{id:e.id,label:null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.userName}}))})).then((function(e){h(e),l.priestId&&f.setFieldValue("priests",e.filter((function(e){return e.id===l.priestId})))}))}),[]),(0,n.useEffect)((function(){d.b.get("/temples/name").then((function(e){return e.data.map((function(e){return{id:e.id,label:e.name}}))})).then((function(e){b(e),l.templeId&&f.setFieldValue("temples",e.filter((function(e){return e.id===l.templeId})))}))}),[]);var f=(0,u.TA)({initialValues:l,onSubmit:function(e,l){(0,l.validateForm)(e).then((function(l){s(e)}))},validationSchema:p,validateOnBlur:!0,validateOnChange:!1});return console.log(f.errors),(0,v.jsxs)("form",{onSubmit:f.handleSubmit,children:[(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("aside",{className:"col-md-6",children:(0,v.jsxs)("div",{className:"form-group",children:[(0,v.jsx)("label",{htmlFor:"cityId",children:"Service"}),(0,v.jsx)(j.pY,{selected:f.values.services,id:"servicesId",options:t,onChange:function(e){(null===e||void 0===e?void 0:e.length)>0?(f.setFieldValue("servicesId",e[0].id),f.setFieldValue("services",e)):(f.setFieldValue("servicesId",""),f.setFieldValue("services",[]))},placeholder:"Choose a service..."})]})})}),(0,v.jsx)("div",{className:"modal-footer d-flex justify-content-end",children:(0,v.jsx)("button",{type:"submit",className:"btn mb-2 btn-primary",children:"Save"})})]})},b=["temples","services","priests"],f=function(e){return d.b.post("/temple-services",e)},y=function(e){var s=e.handleSuccess,l=e.handleClose,i=e.templeId,c=(0,m.D)({mutationFn:f});return(0,v.jsxs)(h.Z,{show:!0,onHide:l,size:"lg",children:[(0,v.jsxs)(h.Z.Header,{closeButton:!1,children:[(0,v.jsx)(h.Z.Title,{children:"New Temple Service"}),(0,v.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:l,children:(0,v.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,v.jsx)(h.Z.Body,{children:(0,v.jsx)(N,{initialValues:{services:[],priests:[],bookingDate:"",temples:[]},onSubmit:function(e){e.temples,e.services,e.priests;var l=(0,o.Z)(e,b);c.mutate((0,r.Z)((0,r.Z)({},l),{},{templeId:+i}),{onSuccess:s})}})})]})},g=function(){var e=(0,t.UO)().id,s=(0,n.useState)(!1),l=(0,i.Z)(s,2),r=l[0],o=l[1],m=(0,n.useState)(!1),h=(0,i.Z)(m,2),u=h[0],j=h[1],x=(0,n.useState)(),p=(0,i.Z)(x,2),N=p[0],b=(p[1],(0,c.a)({queryKey:["temple-details",e],queryFn:function(){return function(e){return d.b.get("/temples/".concat(e)).then((function(e){return e.data}))}(e)}})),f=b.data,g=(b.error,(0,c.a)({queryKey:["temple-services",e],queryFn:function(){return s=e,d.b.get("/temple-services?templeId=".concat(s,"&pageIndex=0&pageSize=20")).then((function(e){return e.data}));var s}})),S=g.data,w=g.isLoading,I=function(){o(!0)};return(0,v.jsxs)(v.Fragment,{children:[f&&(0,v.jsx)("div",{className:"row justify-content-center",children:(0,v.jsxs)("div",{className:"col-12",children:[(0,v.jsx)("div",{className:"row heading-add",children:(0,v.jsx)("aside",{className:"col-sm-10",children:(0,v.jsx)("h2",{className:"mb-0 page-title",children:"Temple Details"})})}),(0,v.jsxs)("div",{className:"row my-2",children:[(0,v.jsxs)("div",{className:"col-md-6",children:[(0,v.jsx)("div",{className:"card shadow",children:(0,v.jsxs)("div",{className:"card-body",children:[(0,v.jsx)("h5",{className:"card-title",children:"Temple Details"}),(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-md-5 mt-1",children:(0,v.jsx)("label",{children:"Temple Name"})}),(0,v.jsx)("div",{className:"col-md-7 mt-1",children:(0,v.jsx)("label",{children:f.name})}),(0,v.jsx)("div",{className:"col-md-5 mt-1",children:(0,v.jsx)("label",{children:"Temple Board"})}),(0,v.jsx)("div",{className:"col-md-7 mt-1",children:(0,v.jsx)("label",{children:f.boardName})}),(0,v.jsx)("div",{className:"col-md-5 mt-1",children:(0,v.jsx)("label",{children:"Legal Identification Number"})}),(0,v.jsx)("div",{className:"col-md-7 mt-1",children:(0,v.jsx)("label",{children:f.legalIdentificationNumber})}),(0,v.jsx)("div",{className:"col-md-5 mt-1",children:(0,v.jsx)("label",{children:"Temple Type"})}),(0,v.jsx)("div",{className:"col-md-7 mt-1",children:(0,v.jsx)("label",{children:f.templeType})}),(0,v.jsx)("div",{className:"col-md-5 mt-1",children:(0,v.jsx)("label",{children:"Mobile"})}),(0,v.jsx)("div",{className:"col-md-7 mt-1",children:(0,v.jsx)("label",{children:f.phone})}),(0,v.jsx)("div",{className:"col-md-5 mt-1",children:(0,v.jsx)("label",{children:"Website"})}),(0,v.jsx)("div",{className:"col-md-7 mt-1",children:(0,v.jsx)("label",{children:f.website})}),(0,v.jsx)("div",{className:"col-md-5 mt-1",children:(0,v.jsx)("label",{children:"Year Of Establishment"})}),(0,v.jsx)("div",{className:"col-md-7 mt-1",children:(0,v.jsx)("label",{children:new Date(f.yearOfEstablishment).getFullYear()})})]})]})}),(0,v.jsx)("div",{className:"col-md-6"})]}),(0,v.jsxs)("div",{className:"col-md-6",children:[(0,v.jsx)("div",{className:"card shadow",children:(0,v.jsx)("div",{className:"card-body",children:(0,v.jsx)("h5",{className:"card-title",children:"Temple Images"})})}),(0,v.jsx)("div",{className:"col-md-6"})]})]}),(0,v.jsxs)("div",{className:"row my-2",children:[(0,v.jsxs)("div",{className:"col-md-6",children:[(0,v.jsx)("div",{className:"card shadow",children:(0,v.jsxs)("div",{className:"card-body",children:[(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("aside",{className:"col-sm-10",children:(0,v.jsx)("h5",{className:"card-title",children:"Temple Services"})}),(0,v.jsx)("aside",{className:"col-sm-2 add-sec",children:(0,v.jsx)("button",{className:"bttn",onClick:I,children:"Add"})})]}),(0,v.jsx)("div",{children:(0,v.jsxs)("table",{className:"table mt-2",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Name"}),(0,v.jsx)("th",{children:"Price"}),(0,v.jsx)("th",{children:"Time"}),(0,v.jsx)("th",{children:"Actions"})]})}),(0,v.jsx)("tbody",{children:w?(0,v.jsx)("tr",{children:(0,v.jsx)("td",{rowSpan:"10",colSpan:"4",children:(0,v.jsx)("div",{className:"text-center py-5",children:(0,v.jsx)(a.Z,{animation:"border"})})})}):S.data.map((function(e){return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:e.name}),(0,v.jsx)("td",{children:e.boardName}),(0,v.jsx)("td",{}),(0,v.jsx)("td",{}),(0,v.jsx)("td",{})]},e.id)}))})]})})]})}),(0,v.jsx)("div",{className:"col-md-6"})]}),(0,v.jsxs)("div",{className:"col-md-6",children:[(0,v.jsx)("div",{className:"card shadow",children:(0,v.jsxs)("div",{className:"card-body",children:[(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("aside",{className:"col-sm-10",children:(0,v.jsx)("h5",{className:"card-title",children:"Priests"})}),(0,v.jsx)("aside",{className:"col-sm-2 add-sec",children:(0,v.jsx)("button",{className:"bttn",onClick:I,children:"Add"})})]}),(0,v.jsx)("div",{children:(0,v.jsxs)("table",{className:"table mt-2",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Priest Name"}),(0,v.jsx)("th",{children:"Actions"})]})}),(0,v.jsx)("tbody",{})]})})]})}),(0,v.jsx)("div",{className:"col-md-6"})]})]})]})}),r?(0,v.jsx)(y,{handleSuccess:function(){o(!1)},templeId:e,handleClose:function(){return o(!1)}}):null,u?(0,v.jsx)(y,{handleSuccess:function(){j(!1)},id:N,templeId:e,handleClose:function(){return j(!1)}}):null]})}},8639:function(){}}]);
//# sourceMappingURL=97.dfd56f75.chunk.js.map