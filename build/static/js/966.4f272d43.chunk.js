"use strict";(self.webpackChunkips_app=self.webpackChunkips_app||[]).push([[966],{2806:function(e,s,n){n.d(s,{b:function(){return a}});var a=n(1243).Z.create({baseURL:"http://13.59.240.218"});a.interceptors.request.use((function(e){e.headers["Content-Type"]="application/json",e.headers.Accept="*/*",e.headers["Access-Control-Allow-Origin"]="*",e.headers["Access-Control-Allow-Headers"]="Origin, X-Requested-With, Content-Type, Accept";var s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer "+s),e}),(function(e){return Promise.reject(e)})),a.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}))},183:function(e,s,n){n.d(s,{k:function(){return i}});var a=n(184),i=function(e){var s,n,i,t,r,l;if(!e.address||0===e.address.length)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{}),(0,a.jsx)("td",{}),(0,a.jsx)("td",{}),(0,a.jsx)("td",{}),(0,a.jsx)("td",{})]});var d=e.address[0];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{children:d.addressLine1}),(0,a.jsx)("td",{children:d.addressLine2}),(0,a.jsx)("td",{children:null===(s=d.city)||void 0===s?void 0:s.name}),(0,a.jsx)("td",{children:null===(n=d.city)||void 0===n||null===(i=n.state)||void 0===i?void 0:i.name}),(0,a.jsx)("td",{children:null===(t=d.city)||void 0===t||null===(r=t.state)||void 0===r||null===(l=r.country)||void 0===l?void 0:l.name})]})}},7883:function(e,s,n){n.d(s,{$:function(){return t}});var a=n(3637),i=n(184),t=function(e){var s=e.page,n=e.pageSize,t=e.data,r=e.setPage;return(0,i.jsxs)("div",{className:"row pagin-sec",children:[(0,i.jsx)("div",{className:"col-sm-12 col-md-5",children:(0,i.jsx)("div",{className:"dataTables_info",role:"status","aria-live":"polite",children:"Showing ".concat(s*n+1," to  ").concat(s*n+t.data.length," of ").concat(t.count," entries")})}),(0,i.jsx)("div",{className:"col-sm-12 col-md-7",style:{display:"flex",justifyContent:"flex-end"},children:(0,i.jsx)(a.Z,{itemClass:"page-item",prevPageText:"Previous",nextPageText:"Next",linkClass:"page-link",activePage:s+1,itemsCountPerPage:n,totalItemsCount:t.count,pageRangeDisplayed:5,hideFirstLastPages:!0,onChange:function(e){return r(e-1)}})})]})}},7282:function(e,s,n){n.d(s,{p:function(){return c}});var a=n(9439),i=n(2791),t=n(9603),r=n(3360);var l=n.p+"static/media/trash-icon.ee0252a5a11b0d7959d2605f91ec705d.svg",d=n(184),c=function(e){var s=e.onClick,n=(0,i.useState)(!1),c=(0,a.Z)(n,2),o=c[0],u=c[1],h=function(){u(!1)};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("img",{className:"action-item",style:{cursor:"pointer"},src:l,onClick:function(){return u(!0)}}),o?(0,d.jsxs)(t.Z,{show:!0,onHide:h,size:"lg",children:[(0,d.jsxs)(t.Z.Header,{closeButton:!1,children:[(0,d.jsx)(t.Z.Title,{children:"Delete"}),(0,d.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:h,children:(0,d.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,d.jsxs)(t.Z.Body,{children:["Are you sure you want to delete?",(0,d.jsxs)("div",{className:"modal-footer d-flex justify-content-end",children:[(0,d.jsx)(r.Z,{variant:"primary",onClick:function(){u(!1),s()},children:" Yes"}),(0,d.jsx)(r.Z,{variant:"danger",onClick:h,children:"No"})]})]})]}):null]})}},2805:function(e,s,n){n.d(s,{d:function(){return t}});n(2791);var a=n.p+"static/media/edit-icon.99f293607452e6df8a5fe12a6b47b2b0.svg",i=n(184),t=function(e){var s=e.onClick;return(0,i.jsx)("img",{style:{cursor:"pointer"},src:a,onClick:s})}},9324:function(e,s,n){n.d(s,{q:function(){return i}});var a=n(184),i=function(e){return 0===e.code?(0,a.jsx)("span",{className:"badge badge-pill badge-danger",children:"InActive"}):1===e.code?(0,a.jsx)("span",{className:"badge badge-pill badge-success",children:"Active"}):2===e.code?(0,a.jsx)("span",{className:"badge badge-pill badge-warning",children:"Hold"}):void 0}},9966:function(e,s,n){n.r(s),n.d(s,{Users:function(){return E}});var a=n(9439),i=n(6403),t=n(3418),r=n(2917),l=n(2791),d=n(2805),c=n(2806),o=n(183),u=n(7883),h=n(1413),m=n(5987),x=n(9603),j=n(5705),f=n(7734),v=n(8007),p=n(184),y=(0,v.Ry)({firstName:(0,v.Z_)().required("First Name is required"),lastName:(0,v.Z_)().required("Last Name is required"),email:(0,v.Z_)().required("Email is required"),primaryMobile:(0,v.Z_)().required("Mobile is required")}),N=function(e){var s=e.initialValues,n=e.handleSubmit,i=(0,j.TA)({initialValues:s,onSubmit:n,validationSchema:y}),t=(0,l.useState)([]),r=(0,a.Z)(t,2),d=r[0],o=r[1];return(0,l.useEffect)((function(){c.b.get("/cities/name").then((function(e){return e.data.map((function(e){var s,n,a,i,t,r,l,d;return{id:e.id,label:"".concat(null===(s=e.name)||void 0===s?void 0:s.trim()," (").concat(null===(n=e.state)||void 0===n?void 0:n.name," - ").concat(null===(a=e.state)||void 0===a||null===(i=a.country)||void 0===i?void 0:i.name,")"),state:{id:e.stateId,label:null===(t=e.state)||void 0===t?void 0:t.name,country:{id:null===(r=e.state)||void 0===r?void 0:r.countryId,label:null===(l=e.state)||void 0===l||null===(d=l.country)||void 0===d?void 0:d.name}}}}))})).then((function(e){var n,a,t;(o(e),s.cityId)&&(s.cityId&&(i.setFieldValue("city",e.filter((function(e){return e.id===s.cityId}))),i.setFieldValue("state",[null===(n=e.find((function(e){return e.id===s.cityId})))||void 0===n?void 0:n.state]),i.setFieldValue("country",[null===(a=e.find((function(e){return e.id===s.cityId})))||void 0===a||null===(t=a.state)||void 0===t?void 0:t.country])))}))}),[]),(0,p.jsxs)("form",{onSubmit:i.handleSubmit,children:[(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("aside",{className:"col-md-4",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{for:"firstName",children:"First Name *"}),(0,p.jsx)("input",{type:"text",id:"firstName",value:i.values.firstName,onChange:i.handleChange,onBlur:i.handleBlur,className:"form-control form-control-lg",placeholder:"Enter First Name"}),(0,p.jsx)("div",{className:"invalid-feedback",children:i.errors.firstName})]})}),(0,p.jsx)("aside",{className:"col-md-4",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{for:"middleName",children:"Middle Name"}),(0,p.jsx)("input",{type:"text",id:"middleName",value:i.values.middleName,onChange:i.handleChange,onBlur:i.handleBlur,className:"form-control form-control-lg",placeholder:"Enter Middle Name"})]})}),(0,p.jsx)("aside",{className:"col-md-4",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{for:"lastName",children:"Last Name *"}),(0,p.jsx)("input",{type:"text",id:"lastName",value:i.values.lastName,onChange:i.handleChange,onBlur:i.handleBlur,className:"form-control form-control-lg",placeholder:"Enter Last Name"}),(0,p.jsx)("div",{className:"invalid-feedback",children:i.errors.lastName})]})}),(0,p.jsx)("aside",{className:"col-md-4",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{for:"addressLine1",children:"Address Line 1"}),(0,p.jsx)("input",{type:"text",id:"addressLine1",value:i.values.addressLine1,onChange:i.handleChange,onBlur:i.handleBlur,className:"form-control form-control-lg",placeholder:"Enter Address Line 1"})]})}),(0,p.jsx)("aside",{className:"col-md-4",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{for:"addressLine2",children:"Address Line 2"}),(0,p.jsx)("input",{type:"text",id:"addressLine2",value:i.values.addressLine2,onChange:i.handleChange,onBlur:i.handleBlur,className:"form-control form-control-lg",placeholder:"Enter Address Line 2"})]})}),(0,p.jsx)("aside",{className:"col-md-4",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"cityId",children:"City"}),(0,p.jsx)(f.pY,{selected:i.values.city,id:"cityId",options:d,onChange:function(e){var s,n;e&&e.length>0?(i.setFieldValue("city",e),i.setFieldValue("state",[e[0].state]),i.setFieldValue("country",[e[0].state.country]),i.setFieldValue("cityId",e[0].id),i.setFieldValue("stateId",e[0].state.id),i.setFieldValue("countryId",null===(s=e[0].state)||void 0===s||null===(n=s.country)||void 0===n?void 0:n.id)):(i.setFieldValue("city",[]),i.setFieldValue("state",[]),i.setFieldValue("country",[]),i.setFieldValue("cityId",""),i.setFieldValue("stateId",""),i.setFieldValue("countryId",""))},placeholder:"Choose a city..."})]})}),(0,p.jsx)("aside",{className:"col-md-4",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"inputState",children:"State"}),(0,p.jsx)(f.pY,{selected:i.values.state,id:"stateId",disabled:!0,options:i.values.state,placeholder:"Choose a state..."})]})}),(0,p.jsx)("aside",{className:"col-md-4",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"inputState",children:"Country"}),(0,p.jsx)(f.pY,{selected:i.values.country,id:"countryId",disabled:!0,options:i.values.country,placeholder:"Choose a country..."})]})}),(0,p.jsx)("aside",{className:"col-md-4",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{for:"email",children:"Email *"}),(0,p.jsx)("input",{type:"text",id:"email",value:i.values.email,disabled:i.values.id,onChange:i.handleChange,onBlur:i.handleBlur,className:"form-control form-control-lg",placeholder:"Enter Email",required:"",autofocus:""}),(0,p.jsx)("div",{className:"invalid-feedback",children:i.errors.email})]})}),(0,p.jsx)("aside",{className:"col-md-4",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{for:"userType",children:"User Type *"}),(0,p.jsxs)("select",{id:"userType",value:i.values.userType,onChange:i.handleChange,onBlur:i.handleBlur,className:"form-control form-control-lg",children:[(0,p.jsx)("option",{value:"",children:"Select User Type"}),(0,p.jsx)("option",{children:"USER"}),(0,p.jsx)("option",{children:"PRIEST"}),(0,p.jsx)("option",{children:"TEMPLE"})]})]})}),(0,p.jsx)("aside",{className:"col-md-4",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{for:"primaryMobile",children:"Mobile *"}),(0,p.jsx)("input",{type:"number",id:"primaryMobile",value:i.values.primaryMobile,onChange:i.handleChange,onBlur:i.handleBlur,className:"form-control form-control-lg",placeholder:"Enter Mobile",required:"",autofocus:""}),(0,p.jsx)("div",{className:"invalid-feedback",children:i.errors.primaryMobile})]})}),(0,p.jsx)("aside",{className:"col-md-4",children:(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{for:"inputCurrentLocation",children:"Current Location"}),(0,p.jsx)("input",{type:"text",id:"inputCurrentLocation",onChange:i.handleChange,onBlur:i.handleBlur,className:"form-control form-control-lg",placeholder:"Enter Current Location",required:"",autofocus:""})]})})]}),(0,p.jsx)("div",{className:"modal-footer d-flex justify-content-end",children:(0,p.jsx)("button",{type:"submit",className:"btn mb-2 btn-primary",children:"Save"})})]})},g=["country","city","state","cityId","countryId","stateId","addressLine1","addressLine2"],b=function(e){return c.b.post("/users",e)},C=function(e){var s=e.handleSuccess,n=e.handleClose,a=(0,t.D)({mutationFn:b});return(0,p.jsxs)(x.Z,{show:!0,onHide:n,size:"lg",children:[(0,p.jsxs)(x.Z.Header,{closeButton:!1,children:[(0,p.jsx)(x.Z.Title,{children:"New User"}),(0,p.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:n,children:(0,p.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,p.jsx)(x.Z.Body,{children:(0,p.jsx)(N,{initialValues:{email:"",password:"",alternativeMobile:"",confirmPassword:"",dateOfBirth:"",lastName:"",middleName:"",primaryMobile:"",roleId:1,userType:""},handleSubmit:function(e){e.country,e.city,e.state;var n=e.cityId,i=(e.countryId,e.stateId,e.addressLine1),t=e.addressLine2,r=(0,m.Z)(e,g),l=[{addressLine1:i,addressLine2:t,cityId:n,addressType:"Current"}];a.mutate((0,h.Z)((0,h.Z)({},r),{},{roleId:1,password:"Test@123",confirmPassword:"Test@123",address:l}),{onSuccess:s})}})})]})},Z=["address"],L=["country","city","state","cityId","countryId","stateId","addressLine1","addressLine2"],I=function(e){return c.b.put("/users/".concat(e.id),e)},S=function(e){var s=e.handleSuccess,n=e.handleClose,a=e.id,i=(0,r.a)({queryKey:["user-details",a],queryFn:function(){return function(e){return c.b.get("/users/".concat(e)).then((function(e){return e.data}))}(a)},select:function(e){var s,n=e.address,a=(0,m.Z)(e,Z),i=n[0].addressType,t=n[0].addressLine2,r=n[0].addressLine1,l=n[0].cityId;return(0,h.Z)((0,h.Z)({},a),{},{addressType:i,addressLine1:r,addressLine2:t,cityId:l,addressId:null===(s=n[0])||void 0===s?void 0:s.id})}}),l=i.data,d=(0,t.D)({mutationFn:I});return(0,p.jsx)(p.Fragment,{children:l&&(0,p.jsxs)(x.Z,{show:!0,onHide:n,size:"lg",children:[(0,p.jsxs)(x.Z.Header,{closeButton:!1,children:[(0,p.jsx)(x.Z.Title,{children:"Edit User"}),(0,p.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:n,children:(0,p.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,p.jsx)(x.Z.Body,{children:(0,p.jsx)(N,{initialValues:(0,h.Z)((0,h.Z)({},l),{},{city:[]}),handleSubmit:function(e){e.country,e.city,e.state;var n=e.cityId,i=(e.countryId,e.stateId,e.addressLine1),t=e.addressLine2,r=(0,m.Z)(e,L),c=[{addressLine1:i,addressLine2:t,cityId:n,id:l.addressId,addressType:"Current"}];d.mutate((0,h.Z)((0,h.Z)({},r),{},{id:a,address:c}),{onSuccess:s})}})})]})})},F=n(7282),k=n(9324),w=n(2469),B=n(4849),T=function(e){return c.b.delete("/users/".concat(e))},E=function(){var e=(0,i.NL)(),s=(0,l.useState)(0),n=(0,a.Z)(s,2),h=n[0],m=n[1],x=(0,l.useState)(!1),j=(0,a.Z)(x,2),f=j[0],v=j[1],y=(0,l.useState)(!1),N=(0,a.Z)(y,2),g=N[0],b=N[1],Z=(0,l.useState)(),L=(0,a.Z)(Z,2),I=L[0],E=L[1],A=(0,l.useState)(!1),V=(0,a.Z)(A,2),q=V[0],P=V[1],M=(0,t.D)({mutationFn:T}),H=(0,r.a)({queryKey:["users",h],queryFn:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return c.b.get("/users?pageIndex=".concat(e,"&pageSize=").concat(s)).then((function(e){return e.data}))}(h,20)},keepPreviousData:!0}),U=H.isLoading,z=H.data,D=H.refetch,R=function(e){return function(){M.mutate(e,{onSuccess:D,onError:function(e){P(!0),setTimeout((function(){P(!1)}),3e3)}})}};return(0,p.jsxs)(p.Fragment,{children:[q?(0,p.jsxs)(w.Z,{variant:"danger",onClose:function(){return q(!1)},children:[(0,p.jsx)(w.Z.Heading,{children:"Server Error!"}),(0,p.jsx)("p",{children:"Can not user"})]}):null,(0,p.jsx)("div",{className:"row justify-content-center",children:(0,p.jsxs)("div",{className:"col-12",children:[(0,p.jsxs)("div",{className:"row heading-add",children:[(0,p.jsx)("aside",{className:"col-sm-10",children:(0,p.jsx)("h2",{className:"mb-0 page-title",children:"Users"})}),(0,p.jsx)("aside",{className:"col-sm-2 add-sec",children:(0,p.jsx)("button",{className:"bttn",onClick:function(){return v(!0)},children:"Add"})})]}),(0,p.jsx)("div",{className:"row my-2",children:(0,p.jsx)("div",{className:"col-md-12",children:(0,p.jsx)("div",{className:"card shadow",children:(0,p.jsxs)("div",{className:"card-body",children:[(0,p.jsx)("div",{className:"resp-table users-tb",children:(0,p.jsxs)("table",{className:"table",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"First Name"}),(0,p.jsx)("th",{children:"Middle Name"}),(0,p.jsx)("th",{children:"Last Name"}),(0,p.jsx)("th",{children:"Address Line 1"}),(0,p.jsx)("th",{children:"Address Line 2"}),(0,p.jsx)("th",{children:"City"}),(0,p.jsx)("th",{children:"State"}),(0,p.jsx)("th",{children:"Country"}),(0,p.jsx)("th",{children:"Email"}),(0,p.jsx)("th",{children:"Mobile"}),(0,p.jsx)("th",{children:"Current Location"}),(0,p.jsx)("th",{children:"Status"}),(0,p.jsx)("th",{children:"Actions"})]})}),(0,p.jsx)("tbody",{children:U?(0,p.jsx)("tr",{children:(0,p.jsx)("td",{rowSpan:"10",colSpan:"13",children:(0,p.jsx)("div",{className:"text-center py-5",children:(0,p.jsx)(B.Z,{animation:"border"})})})}):z.data.map((function(e){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:e.firstName}),(0,p.jsx)("td",{children:e.middleName}),(0,p.jsxs)("td",{children:[" ",e.lastName]}),(0,p.jsx)(o.k,{address:e.address}),(0,p.jsx)("td",{children:e.email}),(0,p.jsx)("td",{children:e.primaryMobile}),(0,p.jsx)("td",{}),(0,p.jsx)("td",{children:(0,p.jsx)(k.q,{code:e.status})}),(0,p.jsxs)("td",{className:"actions",children:[(0,p.jsx)(d.d,{onClick:(s=e.id,function(){E(s),b(!0)})}),(0,p.jsx)(F.p,{onClick:R(e.id)})]})]},e.id);var s}))})]})}),U?null:(0,p.jsx)(u.$,{page:h,pageSize:20,data:z,setPage:m})]})})})})]})}),f?(0,p.jsx)(C,{handleSuccess:function(){v(!1),D()},handleClose:function(){return v(!1)}}):null,g?(0,p.jsx)(S,{id:I,handleSuccess:function(){e.invalidateQueries({queryKey:["user-details",I]}),b(!1),D()},handleClose:function(){return b(!1)}}):null]})}},2469:function(e,s,n){var a=n(1413),i=n(5987),t=n(1694),r=n.n(t),l=n(2791),d=n(239),c=n(9007),o=n(6445),u=n(162),h=n(4418),m=n(473),x=n(7472),j=n(6543),f=n(184),v=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],p=(0,x.Z)("h4");p.displayName="DivStyledAsH4";var y=(0,j.Z)("alert-heading",{Component:p}),N=(0,j.Z)("alert-link",{Component:o.Z}),g={variant:"primary",show:!0,transition:h.Z,closeLabel:"Close alert"},b=l.forwardRef((function(e,s){var n=(0,d.Ch)(e,{show:"onClose"}),t=n.bsPrefix,l=n.show,o=n.closeLabel,x=n.closeVariant,j=n.className,p=n.children,y=n.variant,N=n.onClose,g=n.dismissible,b=n.transition,C=(0,i.Z)(n,v),Z=(0,u.vE)(t,"alert"),L=(0,c.Z)((function(e){N&&N(!1,e)})),I=!0===b?h.Z:b,S=(0,f.jsxs)("div",(0,a.Z)((0,a.Z)({role:"alert"},I?void 0:C),{},{ref:s,className:r()(j,Z,y&&"".concat(Z,"-").concat(y),g&&"".concat(Z,"-dismissible")),children:[g&&(0,f.jsx)(m.Z,{onClick:L,"aria-label":o,variant:x}),p]}));return I?(0,f.jsx)(I,(0,a.Z)((0,a.Z)({unmountOnExit:!0},C),{},{ref:void 0,in:l,children:S})):l?S:null}));b.displayName="Alert",b.defaultProps=g,s.Z=Object.assign(b,{Link:N,Heading:y})}}]);
//# sourceMappingURL=966.4f272d43.chunk.js.map