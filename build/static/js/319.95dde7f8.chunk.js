"use strict";(self.webpackChunkips_app=self.webpackChunkips_app||[]).push([[319],{2806:function(e,n,s){s.d(n,{b:function(){return t}});var t=s(1243).Z.create({baseURL:"http://13.59.240.218"});t.interceptors.request.use((function(e){e.headers["Content-Type"]="application/json",e.headers.Accept="*/*",e.headers["Access-Control-Allow-Origin"]="*",e.headers["Access-Control-Allow-Headers"]="Origin, X-Requested-With, Content-Type, Accept";var n=localStorage.getItem("token");return n&&(e.headers.Authorization="Bearer "+n),e}),(function(e){return Promise.reject(e)})),t.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}))},183:function(e,n,s){s.d(n,{k:function(){return i}});var t=s(184),i=function(e){var n,s,i,r,a,d;if(!e.address||0===e.address.length)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{}),(0,t.jsx)("td",{}),(0,t.jsx)("td",{}),(0,t.jsx)("td",{}),(0,t.jsx)("td",{})]});var l=e.address[0];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{children:l.addressLine1}),(0,t.jsx)("td",{children:l.addressLine2}),(0,t.jsx)("td",{children:null===(n=l.city)||void 0===n?void 0:n.name}),(0,t.jsx)("td",{children:null===(s=l.city)||void 0===s||null===(i=s.state)||void 0===i?void 0:i.name}),(0,t.jsx)("td",{children:null===(r=l.city)||void 0===r||null===(a=r.state)||void 0===a||null===(d=a.country)||void 0===d?void 0:d.name})]})}},7883:function(e,n,s){s.d(n,{$:function(){return r}});var t=s(3637),i=s(184),r=function(e){var n=e.page,s=e.pageSize,r=e.data,a=e.setPage;return(0,i.jsxs)("div",{className:"row pagin-sec",children:[(0,i.jsx)("div",{className:"col-sm-12 col-md-5",children:(0,i.jsx)("div",{className:"dataTables_info",role:"status","aria-live":"polite",children:"Showing ".concat(n*s+1," to  ").concat(n*s+r.data.length," of ").concat(r.count," entries")})}),(0,i.jsx)("div",{className:"col-sm-12 col-md-7",style:{display:"flex",justifyContent:"flex-end"},children:(0,i.jsx)(t.Z,{itemClass:"page-item",prevPageText:"Previous",nextPageText:"Next",linkClass:"page-link",activePage:n+1,itemsCountPerPage:s,totalItemsCount:r.count,pageRangeDisplayed:5,hideFirstLastPages:!0,onChange:function(e){return a(e-1)}})})]})}},6359:function(e,n,s){s.d(n,{n:function(){return i}});var t=s(184),i=function(e){var n=e.dob;return(0,t.jsx)("span",{children:new Intl.DateTimeFormat("en-In",{dateStyle:"medium"}).format(new Date(n))})}},7282:function(e,n,s){s.d(n,{p:function(){return c}});var t=s(9439),i=s(2791),r=s(9603),a=s(3360);var d=s.p+"static/media/trash-icon.ee0252a5a11b0d7959d2605f91ec705d.svg",l=s(184),c=function(e){var n=e.onClick,s=(0,i.useState)(!1),c=(0,t.Z)(s,2),o=c[0],u=c[1],h=function(){u(!1)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("img",{className:"action-item",style:{cursor:"pointer"},src:d,onClick:function(){return u(!0)}}),o?(0,l.jsxs)(r.Z,{show:!0,onHide:h,size:"lg",children:[(0,l.jsxs)(r.Z.Header,{closeButton:!1,children:[(0,l.jsx)(r.Z.Title,{children:"Delete"}),(0,l.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:h,children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,l.jsxs)(r.Z.Body,{children:["Are you sure you want to delete?",(0,l.jsxs)("div",{className:"modal-footer d-flex justify-content-end",children:[(0,l.jsx)(a.Z,{variant:"primary",onClick:function(){u(!1),n()},children:" Yes"}),(0,l.jsx)(a.Z,{variant:"danger",onClick:h,children:"No"})]})]})]}):null]})}},2805:function(e,n,s){s.d(n,{d:function(){return r}});s(2791);var t=s.p+"static/media/edit-icon.99f293607452e6df8a5fe12a6b47b2b0.svg",i=s(184),r=function(e){var n=e.onClick;return(0,i.jsx)("img",{style:{cursor:"pointer"},src:t,onClick:n})}},9324:function(e,n,s){s.d(n,{q:function(){return i}});var t=s(184),i=function(e){return 0===e.code?(0,t.jsx)("span",{className:"badge badge-pill badge-danger",children:"InActive"}):1===e.code?(0,t.jsx)("span",{className:"badge badge-pill badge-success",children:"Active"}):2===e.code?(0,t.jsx)("span",{className:"badge badge-pill badge-warning",children:"Hold"}):void 0}},6319:function(e,n,s){s.r(n),s.d(n,{Priests:function(){return E}});var t=s(9439),i=s(6403),r=s(2917),a=s(3418),d=s(2791),l=s(4849),c=s(8088),o=s(2806),u=s(183),h=s(7883),x=s(6359),m=s(7282),j=s(2805),f=s(9324),p=s(9603),g=s(5705),v=s(8007),b=s(7734),N=s(184),y=(0,v.Ry)({userId:(0,v.Z_)().required("Select User")}),C=function(e){var n=e.initialValues,s=e.handleSubmit,i=(0,g.TA)({initialValues:n,onSubmit:s,validationSchema:y,validateOnBlur:!0,validateOnChange:!1});console.log(i.values);var r=(0,d.useState)([]),a=(0,t.Z)(r,2),l=a[0],c=a[1];return(0,d.useEffect)((function(){o.b.get("/users/email?userType=PRIEST").then((function(e){return e.data.map((function(e){return{id:e.id,label:[e.firstName,e.middleName,e.lastName].filter((function(e){return e})).join(" ")}}))})).then((function(e){c(e),n.userId&&i.setFieldValue("user",e.filter((function(e){return e.id==n.userId})))}))}),[]),(0,N.jsxs)("form",{onSubmit:i.handleSubmit,children:[(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("aside",{className:"col-md-4",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsx)("label",{htmlFor:"cityId",children:"Priest User *"}),(0,N.jsx)(b.pY,{selected:i.values.user,id:"userId",options:l,onChange:function(e){(null===e||void 0===e?void 0:e.length)>0?(i.setFieldValue("userId",e[0].id),i.setFieldValue("user",e)):(i.setFieldValue("userId",""),i.setFieldValue("user",[]))},placeholder:"Choose a user..."}),(0,N.jsx)("div",{className:"invalid-feedback",children:i.errors.userId})]})}),(0,N.jsx)("aside",{className:"col-md-4",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsx)("label",{htmlFor:"designation",children:"Designation"}),(0,N.jsx)("input",{type:"text",id:"designation",value:i.values.designation,onChange:i.handleChange,className:"form-control form-control-lg",placeholder:"Enter Designation"}),(0,N.jsx)("div",{className:"invalid-feedback",children:i.errors.designation})]})}),(0,N.jsx)("aside",{className:"col-md-4",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsx)("label",{htmlFor:"yearsOfExperience",children:"Years of Exp"}),(0,N.jsx)("input",{type:"number",id:"yearsOfExperience",value:i.values.yearsOfExperience,onChange:i.handleChange,className:"form-control form-control-lg",placeholder:"Enter Years of Exp"}),(0,N.jsx)("div",{className:"invalid-feedback",children:i.errors.yearsOfExperience})]})}),(0,N.jsx)("aside",{className:"col-md-12",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsx)("label",{htmlFor:"bio",children:"Bio"}),(0,N.jsx)("textarea",{id:"bio",value:i.values.bio,className:"form-control form-control-lg",placeholder:"Enter Bio",onChange:i.handleChange})]})})]}),(0,N.jsx)("div",{className:"modal-footer d-flex justify-content-end",children:(0,N.jsx)("button",{type:"submit",className:"btn mb-2 btn-primary",children:"Save"})})]})},S=function(e){return o.b.post("/priests",e)},Z=function(e){var n=e.handleSuccess,s=e.handleClose,t=(0,a.D)({mutationFn:S});return(0,N.jsxs)(p.Z,{show:!0,onHide:s,size:"lg",children:[(0,N.jsxs)(p.Z.Header,{closeButton:!1,children:[(0,N.jsx)(p.Z.Title,{children:"New Priest"}),(0,N.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:s,children:(0,N.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,N.jsx)(p.Z.Body,{children:(0,N.jsx)(C,{initialValues:{name:"",description:"",status:""},handleSubmit:function(e){console.log(e),t.mutate(e,{onSuccess:n})}})})]})},k=s(1413),F=function(e){return o.b.put("/priests/".concat(e.id),e)},w=function(e){var n=e.handleSuccess,s=e.handleClose,t=e.id,i=(0,r.a)({queryKey:["priest-details",t],queryFn:function(){return function(e){return o.b.get("/priests/".concat(e)).then((function(e){return e.data}))}(t)}}),d=i.data,l=(i.error,(0,a.D)({mutationFn:F}));return(0,N.jsx)(N.Fragment,{children:d&&(0,N.jsxs)(p.Z,{show:!0,onHide:s,size:"lg",children:[(0,N.jsxs)(p.Z.Header,{closeButton:!1,children:[(0,N.jsx)(p.Z.Title,{children:"Edit Priest"}),(0,N.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:s,children:(0,N.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,N.jsx)(p.Z.Body,{children:(0,N.jsx)(C,{initialValues:(0,k.Z)((0,k.Z)({},d),{},{user:[]}),handleSubmit:function(e){l.mutate((0,k.Z)((0,k.Z)({},e),{},{id:t}),{onSuccess:n})}})})]})})},P=function(e){return o.b.delete("/priests/".concat(e))},E=function(){var e=(0,i.NL)(),n=(0,d.useState)(0),s=(0,t.Z)(n,2),p=s[0],g=s[1],v=(0,d.useState)(!1),b=(0,t.Z)(v,2),y=b[0],C=b[1],S=(0,d.useState)(!1),k=(0,t.Z)(S,2),F=k[0],E=k[1],A=(0,d.useState)(),I=(0,t.Z)(A,2),T=I[0],B=I[1],D=(0,d.useState)(""),O=(0,t.Z)(D,2),q=O[0],L=(O[1],(0,d.useState)(!1)),V=(0,t.Z)(L,2),H=(V[0],V[1]),z=(0,r.a)({queryKey:["priests",p,q],queryFn:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,s=arguments.length>2?arguments[2]:void 0;return o.b.get("/priests?pageIndex=".concat(e,"&pageSize=").concat(n,"&search=").concat(s)).then((function(e){return e.data}))}(p,20,q)},keepPreviousData:!0}),R=z.data,Y=z.refetch,M=z.isLoading,_=(0,a.D)({mutationFn:P}),K=function(e){return function(){_.mutate(e,{onSuccess:Y,onError:function(e){H(!0),setTimeout((function(){H(!1)}),3e3)}})}};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"row justify-content-center",children:(0,N.jsxs)("div",{className:"col-12",children:[(0,N.jsxs)("div",{className:"row heading-add",children:[(0,N.jsx)("aside",{className:"col-sm-10",children:(0,N.jsx)("h2",{className:"mb-0 page-title",children:"Priest"})}),(0,N.jsx)("aside",{className:"col-sm-2 add-sec",children:(0,N.jsx)("button",{className:"bttn",onClick:function(){return C(!0)},children:"Add"})})]}),(0,N.jsx)("div",{className:"row my-2",children:(0,N.jsx)("div",{className:"col-md-12",children:(0,N.jsx)("div",{className:"card shadow",children:(0,N.jsxs)("div",{className:"card-body",children:[(0,N.jsx)("div",{className:"resp-table priest-tb",children:(0,N.jsxs)("table",{className:"table",children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{children:"First Name"}),(0,N.jsx)("th",{children:"Middle Name"}),(0,N.jsx)("th",{children:"Last Name"}),(0,N.jsx)("th",{children:"Address Line 1"}),(0,N.jsx)("th",{children:"Address Line 2"}),(0,N.jsx)("th",{children:"City"}),(0,N.jsx)("th",{children:"State"}),(0,N.jsx)("th",{children:"Country"}),(0,N.jsx)("th",{children:"Email"}),(0,N.jsx)("th",{children:"Mobile"}),(0,N.jsx)("th",{children:"Current Location"}),(0,N.jsx)("th",{children:"Father Name"}),(0,N.jsx)("th",{children:"Date Of Birth"}),(0,N.jsx)("th",{children:"Mother Tounge"}),(0,N.jsx)("th",{children:"Photograph"}),(0,N.jsx)("th",{children:"Designation"}),(0,N.jsx)("th",{children:"Years of Exp"}),(0,N.jsx)("th",{children:"Status"}),(0,N.jsx)("th",{children:"Actions"})]})}),(0,N.jsx)("tbody",{children:M?(0,N.jsx)("tr",{children:(0,N.jsx)("td",{rowSpan:"10",colSpan:"15",children:(0,N.jsx)("div",{className:"text-center py-5",children:(0,N.jsx)(l.Z,{animation:"border"})})})}):R.data.map((function(e){return(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:e.user.firstName}),(0,N.jsx)("td",{children:e.user.middleName}),(0,N.jsxs)("td",{children:[" ",e.user.lastName]}),(0,N.jsx)(u.k,{address:e.user.address}),(0,N.jsx)("td",{children:e.user.email}),(0,N.jsx)("td",{children:e.user.primaryMobile}),(0,N.jsx)("td",{}),(0,N.jsx)("td",{children:e.user.fatherName}),(0,N.jsx)("td",{children:(0,N.jsx)(x.n,{dob:e.user.dateOfBirth})}),(0,N.jsx)("td",{children:e.user.motherTongue}),(0,N.jsx)("td",{children:(0,N.jsx)("img",{style:{borderRadius:"50%"},height:"40",width:"40",src:e.image||c})}),(0,N.jsx)("td",{children:e.designation}),(0,N.jsx)("td",{children:e.yearsOfExperience}),(0,N.jsx)("td",{children:(0,N.jsx)(f.q,{code:e.status})}),(0,N.jsxs)("td",{className:"actions",children:[(0,N.jsx)(j.d,{onClick:(n=e.id,function(){B(n),E(!0)})}),(0,N.jsx)(m.p,{onClick:K(e.id)})]})]},e.id);var n}))})]})}),M?null:(0,N.jsx)(h.$,{page:p,pageSize:20,data:R,setPage:g})]})})})})]})}),y?(0,N.jsx)(Z,{handleSuccess:function(){C(!1),Y()},handleClose:function(){return C(!1)}}):null,F?(0,N.jsx)(w,{handleSuccess:function(){e.invalidateQueries({queryKey:["priest-details",T]}),E(!1),Y()},id:T,handleClose:function(){return E(!1)}}):null]})}},8088:function(e,n,s){e.exports=s.p+"static/media/avatar-generic-avatar.169ceb4d7fa0dfee81f4.png"}}]);
//# sourceMappingURL=319.95dde7f8.chunk.js.map